# Global configuration for the RPG thesis prototype.
# Values here are defaults and can be overridden by environment variables.

app:
  # Application name (used in logs/UI)
  name: "rpg-thesis"
  # Environment mode: dev or prod
  env: "dev"
  # Base data directory
  data_dir: "data"
  # Per-play session data (state + logs)
  sessions_dir: "data/sessions"
  # Reusable generated world assets
  worlds_dir: "data/worlds"
  # Vector store directory for RAG
  vectorstore_dir: "data/vectorstore"

llm:
  # LLM provider type (OpenAI-compatible DashScope)
  provider: "dashscope_openai_compatible"
  # Base URL for the LLM API (override with LLM_BASE_URL)
  base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
  # Model name (override with LLM_MODEL)
  model: "qwen3-max"
  # Environment variable name for the API key
  api_key_env: "DASHSCOPE_API_KEY"
  # Request timeout in seconds
  timeout_seconds: 30
  # Max retry attempts for failed requests
  max_retries: 2
  # Sampling temperature
  temperature: 0.7
  # Top-p nucleus sampling
  top_p: 0.9

rag:
  # Enable/disable RAG pipeline
  enabled: true
  # Top-k retrieved memories
  top_k: 5
  # Number of recent summaries always included
  summary_window: 3

worldgen:
  # Max retries for invalid world JSON
  max_retries: 2
  # Enforce strict consistency rules during generation
  strict_consistency: true
  # Optional: require bidirectional edges in location graph (A<->B)
  enforce_bidirectional_edges: false
  # Legacy static list (unused); anachronisms come from world_bible.do_not_mention + tech_level
  banned_keywords: []
  # Enforce bidirectional edges (preferred new flag)
  strict_bidirectional_edges: false
  # Max rewrite attempts for invalid or inconsistent worlds
  max_rewrite_attempts: 1
  # Soft bounds for world size
  locations_min: 3
  locations_max: 8
  npcs_min: 2
  npcs_max: 8

logging:
  # Logging level: DEBUG, INFO, WARNING, ERROR
  level: "INFO"
  # Emit JSONL logs per session
  log_jsonl: true
